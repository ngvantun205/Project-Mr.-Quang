<Page x:Class="TDEduEnglish.Views.CoursesPageView.CourseListeningListPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:TDEduEnglish.Views.CoursesPageView"
      Background="AliceBlue"
      mc:Ignorable="d" 
      d:DesignHeight="740" d:DesignWidth="1200"
      Title="CourseListeningListPage">

    <Page.Resources>
        <!-- TabControl Style -->
        <Style x:Key="ModernTabControl" TargetType="TabControl">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="0"/>
        </Style>

        <!-- TabItem Style -->
        <Style x:Key="ModernTabItem" TargetType="TabItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border x:Name="Border" 
                                Background="White"
                                BorderBrush="#E2E8F0"
                                BorderThickness="0,0,0,3"
                                Padding="32,16"
                                Margin="0,0,8,0"
                                CornerRadius="12,12,0,0"
                                Cursor="Hand">
                            <ContentPresenter x:Name="ContentSite"
                                            ContentSource="Header"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="BorderBrush" Value="#4F46E5"/>
                                <Setter TargetName="Border" Property="Background" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="False">
                                <Setter TargetName="Border" Property="BorderBrush" Value="Transparent"/>
                                <Setter TargetName="Border" Property="Background" Value="#F8FAFC"/>
                                <Setter TargetName="Border" Property="Opacity" Value="0.7"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Opacity" Value="1"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Tab Header Style -->
        <Style x:Key="TabHeaderStyle" TargetType="StackPanel">
            <Setter Property="Orientation" Value="Horizontal"/>
        </Style>

        <!-- Listening Card Style -->
        <Style x:Key="ListeningCardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Opacity="0.06" 
                                    BlurRadius="16" ShadowDepth="0"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect Color="#4F46E5" Opacity="0.2" 
                                            BlurRadius="24" ShadowDepth="0"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Level Badge Style -->
        <Style x:Key="LevelBadgeStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Difficulty Icon Style -->
        <Style x:Key="DifficultyIconStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,0,4,0"/>
        </Style>
    </Page.Resources>

    <Grid Margin="40,32">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header Section -->
        <StackPanel Grid.Row="0" Margin="0,0,0,32">
            <TextBlock Text="🎧 Listening Practice" 
                      FontSize="36" 
                      FontWeight="Bold" 
                      Foreground="#1E293B"
                      Margin="0,0,0,8"/>
            <TextBlock Text="Choose your level and start practicing listening comprehension" 
                      FontSize="16" 
                      Foreground="#64748B"/>
        </StackPanel>

        <!-- TabControl for Levels -->
        <TabControl Grid.Row="1" 
                   Style="{StaticResource ModernTabControl}">

            <!-- Beginner Tab -->
            <TabItem Style="{StaticResource ModernTabItem}">
                <TabItem.Header>
                    <StackPanel Style="{StaticResource TabHeaderStyle}">
                        <TextBlock Text="🌱" FontSize="20" Margin="0,0,8,0"/>
                        <TextBlock Text="Beginner" 
                                  FontSize="16" 
                                  FontWeight="SemiBold"
                                  Foreground="#1E293B"/>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer VerticalScrollBarVisibility="Auto" 
                            HorizontalScrollBarVisibility="Disabled"
                            Margin="0,24,0,0">
                    <ItemsControl ItemsSource="{Binding BeginnerListenings}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Style="{StaticResource ListeningCardStyle}">
                                    <Border.InputBindings>
                                        <MouseBinding MouseAction="LeftClick" 
                                                    Command="{Binding DataContext.StartListeningCommand, 
                                                    RelativeSource={RelativeSource AncestorType=Page}}"
                                                    CommandParameter="{Binding}"/>
                                    </Border.InputBindings>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Icon -->
                                        <Border Grid.Column="0"
                                               Background="#D1FAE5"
                                               CornerRadius="10"
                                               Width="56" Height="56"
                                               Margin="0,0,20,0">
                                            <TextBlock Text="🎧" 
                                                     FontSize="28"
                                                     HorizontalAlignment="Center"
                                                     VerticalAlignment="Center"/>
                                        </Border>

                                        <!-- Content -->
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Title}" 
                                                     FontSize="18" 
                                                     FontWeight="SemiBold"
                                                     Foreground="#1E293B"
                                                     Margin="0,0,0,6"/>
                                            <TextBlock Text="{Binding Description}" 
                                                     FontSize="14" 
                                                     Foreground="#64748B"
                                                     TextWrapping="Wrap"
                                                     Margin="0,0,0,8"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Style="{StaticResource DifficultyIconStyle}" Text="⏱️"/>
                                                <TextBlock Text="{Binding Duration, StringFormat='{}{0} mins'}" 
                                                         FontSize="13"
                                                         Foreground="#64748B"
                                                         Margin="0,0,16,0"/>
                                                <TextBlock Style="{StaticResource DifficultyIconStyle}" Text="📝"/>
                                                <TextBlock Text="{Binding QuestionCount, StringFormat='{}{0} questions'}" 
                                                         FontSize="13"
                                                         Foreground="#64748B"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Level Badge -->
                                        <Border Grid.Column="2"
                                               Style="{StaticResource LevelBadgeStyle}"
                                               Background="#D1FAE5">
                                            <TextBlock Text="Beginner" 
                                                     FontSize="13"
                                                     FontWeight="Medium"
                                                     Foreground="#059669"/>
                                        </Border>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </TabItem>

            <!-- Intermediate Tab -->
            <TabItem Style="{StaticResource ModernTabItem}">
                <TabItem.Header>
                    <StackPanel Style="{StaticResource TabHeaderStyle}">
                        <TextBlock Text="🔥" FontSize="20" Margin="0,0,8,0"/>
                        <TextBlock Text="Intermediate" 
                                  FontSize="16" 
                                  FontWeight="SemiBold"
                                  Foreground="#1E293B"/>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer VerticalScrollBarVisibility="Auto" 
                            HorizontalScrollBarVisibility="Disabled"
                            Margin="0,24,0,0">
                    <ItemsControl ItemsSource="{Binding IntermediateListenings}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Style="{StaticResource ListeningCardStyle}">
                                    <Border.InputBindings>
                                        <MouseBinding MouseAction="LeftClick" 
                                                    Command="{Binding DataContext.StartListeningCommand, 
                                                    RelativeSource={RelativeSource AncestorType=Page}}"
                                                    CommandParameter="{Binding}"/>
                                    </Border.InputBindings>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Icon -->
                                        <Border Grid.Column="0"
                                               Background="#FEF3C7"
                                               CornerRadius="10"
                                               Width="56" Height="56"
                                               Margin="0,0,20,0">
                                            <TextBlock Text="🎧" 
                                                     FontSize="28"
                                                     HorizontalAlignment="Center"
                                                     VerticalAlignment="Center"/>
                                        </Border>

                                        <!-- Content -->
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Title}" 
                                                     FontSize="18" 
                                                     FontWeight="SemiBold"
                                                     Foreground="#1E293B"
                                                     Margin="0,0,0,6"/>
                                            <TextBlock Text="{Binding Description}" 
                                                     FontSize="14" 
                                                     Foreground="#64748B"
                                                     TextWrapping="Wrap"
                                                     Margin="0,0,0,8"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Style="{StaticResource DifficultyIconStyle}" Text="⏱️"/>
                                                <TextBlock Text="{Binding Duration, StringFormat='{}{0} mins'}" 
                                                         FontSize="13"
                                                         Foreground="#64748B"
                                                         Margin="0,0,16,0"/>
                                                <TextBlock Style="{StaticResource DifficultyIconStyle}" Text="📝"/>
                                                <TextBlock Text="{Binding QuestionCount, StringFormat='{}{0} questions'}" 
                                                         FontSize="13"
                                                         Foreground="#64748B"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Level Badge -->
                                        <Border Grid.Column="2"
                                               Style="{StaticResource LevelBadgeStyle}"
                                               Background="#FEF3C7">
                                            <TextBlock Text="Intermediate" 
                                                     FontSize="13"
                                                     FontWeight="Medium"
                                                     Foreground="#D97706"/>
                                        </Border>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </TabItem>

            <!-- Advanced Tab -->
            <TabItem Style="{StaticResource ModernTabItem}">
                <TabItem.Header>
                    <StackPanel Style="{StaticResource TabHeaderStyle}">
                        <TextBlock Text="⚡" FontSize="20" Margin="0,0,8,0"/>
                        <TextBlock Text="Advanced" 
                                  FontSize="16" 
                                  FontWeight="SemiBold"
                                  Foreground="#1E293B"/>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer VerticalScrollBarVisibility="Auto" 
                            HorizontalScrollBarVisibility="Disabled"
                            Margin="0,24,0,0">
                    <ItemsControl ItemsSource="{Binding AdvancedListenings}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Style="{StaticResource ListeningCardStyle}">
                                    <Border.InputBindings>
                                        <MouseBinding MouseAction="LeftClick" 
                                                    Command="{Binding DataContext.StartListeningCommand, 
                                                    RelativeSource={RelativeSource AncestorType=Page}}"
                                                    CommandParameter="{Binding}"/>
                                    </Border.InputBindings>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Icon -->
                                        <Border Grid.Column="0"
                                               Background="#FCE7F3"
                                               CornerRadius="10"
                                               Width="56" Height="56"
                                               Margin="0,0,20,0">
                                            <TextBlock Text="🎧" 
                                                     FontSize="28"
                                                     HorizontalAlignment="Center"
                                                     VerticalAlignment="Center"/>
                                        </Border>

                                        <!-- Content -->
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Title}" 
                                                     FontSize="18" 
                                                     FontWeight="SemiBold"
                                                     Foreground="#1E293B"
                                                     Margin="0,0,0,6"/>
                                            <TextBlock Text="{Binding Description}" 
                                                     FontSize="14" 
                                                     Foreground="#64748B"
                                                     TextWrapping="Wrap"
                                                     Margin="0,0,0,8"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Style="{StaticResource DifficultyIconStyle}" Text="⏱️"/>
                                                <TextBlock Text="{Binding Duration, StringFormat='{}{0} mins'}" 
                                                         FontSize="13"
                                                         Foreground="#64748B"
                                                         Margin="0,0,16,0"/>
                                                <TextBlock Style="{StaticResource DifficultyIconStyle}" Text="📝"/>
                                                <TextBlock Text="{Binding QuestionCount, StringFormat='{}{0} questions'}" 
                                                         FontSize="13"
                                                         Foreground="#64748B"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Level Badge -->
                                        <Border Grid.Column="2"
                                               Style="{StaticResource LevelBadgeStyle}"
                                               Background="#FCE7F3">
                                            <TextBlock Text="Advanced" 
                                                     FontSize="13"
                                                     FontWeight="Medium"
                                                     Foreground="#DB2777"/>
                                        </Border>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </TabItem>

        </TabControl>
    </Grid>
</Page>
